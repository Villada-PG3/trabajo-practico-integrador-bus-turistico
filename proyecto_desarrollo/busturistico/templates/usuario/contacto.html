{% extends 'usuario/base_usuario.html' %}
{% block title %}Contacto - Bus Turístico Buenos Aires{% endblock %}
{% block content %}

<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="text-center">
            <h1 class="hero-title">Contactanos</h1>
            <p class="hero-subtitle">Estamos aquí para ayudarte a planificar tu experiencia perfecta por Buenos Aires</p>
        </div>
    </div>
</section>
<!-- Información de Contacto -->
<section class="py-5">
  <div class="container">
    <div class="row g-4 mb-5 text-center">

      <div class="col-lg-3 col-md-6 animate-on-scroll">
        <div class="modern-card p-4 h-100 d-flex flex-column justify-content-between">
          <div>
            <div class="card-icon mx-auto mb-3"><i class="fas fa-phone"></i></div>
            <h5 class="fw-bold mb-2">Teléfono</h5>
            <p class="text-muted mb-4">Llámanos para reservas inmediatas</p>
          </div>
          <a href="tel:+5493513844333" class="btn btn-outline-primary w-100 mt-auto">
            +54 9 351 384 4333
          </a>
        </div>
      </div>

      <div class="col-lg-3 col-md-6 animate-on-scroll" style="animation-delay: .1s;">
        <div class="modern-card p-4 h-100 d-flex flex-column justify-content-between">
          <div>
            <div class="card-icon mx-auto mb-3" style="background:#25d366;"><i class="fab fa-whatsapp"></i></div>
            <h5 class="fw-bold mb-2">WhatsApp</h5>
            <p class="text-muted mb-4">Consultas rápidas y reservas</p>
          </div>
          <a href="https://wa.me/5493513844333" class="btn btn-outline-success w-100 mt-auto">
            Escribir Mensaje
          </a>
        </div>
      </div>

      <div class="col-lg-3 col-md-6 animate-on-scroll" style="animation-delay: .2s;">
        <div class="modern-card p-4 h-100 d-flex flex-column justify-content-between">
          <div>
            <div class="card-icon mx-auto mb-3"><i class="fas fa-envelope"></i></div>
            <h5 class="fw-bold mb-2">Email</h5>
            <p class="text-muted mb-4">Consultas detalladas y grupos</p>
          </div>
          <a href="mailto:busturistico49@gmail.com" class="btn btn-outline-primary w-100 mt-auto">
            Enviar Email
          </a>
        </div>
      </div>

      <div class="col-lg-3 col-md-6 animate-on-scroll" style="animation-delay: .3s;">
        <div class="modern-card p-4 h-100 d-flex flex-column justify-content-between">
          <div>
            <div class="card-icon mx-auto mb-3"><i class="fas fa-map-marker-alt"></i></div>
            <h5 class="fw-bold mb-2">Punto de Encuentro</h5>
            <p class="text-muted mb-4">Todos los tours parten desde aquí</p>
          </div>
          <a href="https://maps.google.com/?q=Plaza+de+Mayo+Buenos+Aires" target="_blank"
             class="btn btn-outline-primary w-100 mt-auto">
            Plaza de Mayo
          </a>
        </div>
      </div>

    </div>
  </div>
</section>



<!-- Formulario de Contacto y Horarios -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row g-5">
            <div class="col-lg-8">
                <div class="modern-card p-4">
                    <h3 class="fw-bold mb-4">
                        <i class="fas fa-paper-plane text-primary me-2"></i>
                        Envíanos tu Consulta
                    </h3>
                    
                    <form method="post" id="contactForm">
                        {% csrf_token %}
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="nombre" class="form-label fw-semibold">Nombre Completo *</label>
                                <input type="text" class="form-control" id="nombre" name="nombre" required 
                                       placeholder="Tu nombre completo">
                            </div>
                            <div class="col-md-6">
                                <label for="email" class="form-label fw-semibold">Correo Electrónico *</label>
                                <input type="email" class="form-control" id="email" name="email" required 
                                       placeholder="tu@email.com">
                            </div>
                            <div class="col-md-6">
                                <label for="telefono" class="form-label fw-semibold">Teléfono</label>
                                <input type="tel" class="form-control" id="telefono" name="telefono" 
                                       placeholder="+54 11 1234-5678">
                            </div>
                            <div class="col-md-6">
                                <label for="personas" class="form-label fw-semibold">Cantidad de Personas</label>
                                <select class="form-select" id="personas" name="personas">
                                    <option value="">Selecciona</option>
                                    <option value="1">1 persona</option>
                                    <option value="2">2 personas</option>
                                    <option value="3-5">3 a 5 personas</option>
                                    <option value="6-10">6 a 10 personas</option>
                                    <option value="grupo">Más de 10 personas</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="fecha_interes" class="form-label fw-semibold">Fecha de Interés</label>
                                <input type="date" class="form-control" id="fecha_interes" name="fecha_interes">
                            </div>
                            <div class="col-md-6">
                            <label for="recorrido_interes" class="form-label fw-semibold">Recorrido de Interés</label>
                            <select class="form-select" id="recorrido_interes" name="recorrido_interes">
                                <option value="">Cualquier recorrido</option>
                                {% for r in recorridos %}
                                <option value="{{ r.id }}">{{ r.color_recorrido }}</option>
                                {% empty %}
                                <option value="" disabled>(Sin recorridos cargados)</option>
                                {% endfor %}
                            </select>
                            </div>

                            <div class="col-12">
                                <label for="mensaje" class="form-label fw-semibold">Mensaje *</label>
                                <textarea class="form-control" id="mensaje" name="mensaje" rows="5" required 
                                          placeholder="Cuéntanos sobre tu consulta, intereses especiales, necesidades de accesibilidad, etc."></textarea>
                            </div>
                            <div class="col-12">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="acepto_terminos" required>
                                    <label class="form-check-label text-muted" for="acepto_terminos">
                                        Acepto recibir información promocional y estoy de acuerdo con la política de privacidad
                                    </label>
                                </div>
                            </div>
                            <div class="col-12">
                                <button type="submit" class="btn btn-primary btn-lg px-5">
                                    <i class="fas fa-paper-plane me-2"></i>Enviar Consulta
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            
            <div class="col-lg-4">
                <!-- Horarios de Atención -->
                <div class="modern-card p-4 mb-4">
                    <h5 class="fw-bold mb-3">
                        <i class="fas fa-clock text-primary me-2"></i>
                        Horarios de Atención
                    </h5>
                    
                    <div class="mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="fw-semibold">Lunes a Viernes</span>
                            <span class="text-muted">{{ horarios_atencion.lunes_viernes|default:"08:00 - 20:00" }}</span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="fw-semibold">Sábados</span>
                            <span class="text-muted">{{ horarios_atencion.sabados|default:"09:00 - 18:00" }}</span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="fw-semibold">Domingos y Feriados</span>
                            <span class="text-muted">{{ horarios_atencion.domingos|default:"10:00 - 17:00" }}</span>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>¡Importante!</strong> Los tours salen todos los días, incluso feriados.
                    </div>
                </div>

                <!-- Contacto Directo -->
                <div class="modern-card p-4 mb-4">
                    <h5 class="fw-bold mb-3">
                        <i class="fas fa-headset text-primary me-2"></i>
                        Contacto Directo
                    </h5>
                    
                    <div class="d-grid gap-2">
                    <a href="tel:{{ contacto_info.telefono|default:'+5493513844333' }}" class="btn btn-primary">
                        <i class="fas fa-phone me-2"></i>Llamar Ahora
                    </a>
                    <a href="https://wa.me/{{ contacto_info.whatsapp|default:'5493513844333' }}" class="btn btn-success">
                        <i class="fab fa-whatsapp me-2"></i>WhatsApp
                    </a>
                    </div>

                    <hr>

                    <div class="small">
                    <p class="mb-2">
                        <i class="fas fa-envelope text-muted me-2"></i>
                        {{ contacto_info.email|default:"busturistico49@gmail.com" }}
                    </p>
                    <p class="mb-0">
                        <i class="fas fa-map-marker-alt text-muted me-2"></i>
                        {{ contacto_info.direccion|default:"Plaza de Mayo, CABA" }}
                    </p>
                    </div>

                </div>

                <!-- Preguntas Frecuentes -->
                <div class="modern-card p-4">
                    <h5 class="fw-bold mb-3">
                        <i class="fas fa-question-circle text-primary me-2"></i>
                        Preguntas Frecuentes
                    </h5>
                    
                    <div class="accordion accordion-flush" id="faqAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                    ¿Dónde es el punto de encuentro?
                                </button>
                            </h2>
                            <div id="faq1" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body small">
                                    Todos nuestros tours parten desde Plaza de Mayo, frente a la Casa Rosada. Te enviaremos la ubicación exacta al confirmar tu reserva.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                    ¿Qué incluye el tour?
                                </button>
                            </h2>
                            <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body small">
                                    Incluye: Bus climatizado, guía especializado, auriculares, agua mineral y todas las paradas programadas en el itinerario.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                    ¿Puedo cancelar mi reserva?
                                </button>
                            </h2>
                            <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body small">
                                    Sí, puedes cancelar hasta 24 horas antes sin costo. También ofrecemos reagendamiento gratuito por cambios de clima.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Mapa de Ubicación -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-4">
            <h3 class="fw-bold text-primary mb-3">¿Dónde nos encontramos?</h3>
            <p class="text-muted">Plaza de Mayo - El corazón histórico de Buenos Aires</p>
        </div>
        
        <div class="modern-card overflow-hidden">
            <div style="height: 400px; background: linear-gradient(45deg, #f8f9fa, #e9ecef); display: flex; align-items: center; justify-content: center;">
                <div class="text-center">
                    <i class="fas fa-map-marked-alt text-primary" style="font-size: 4rem; opacity: 0.5;"></i>
                    <h5 class="mt-3 text-muted">Mapa Interactivo</h5>
                    <p class="text-muted small">Plaza de Mayo, Ciudad Autónoma de Buenos Aires</p>
                    <a href="https://maps.google.com/?q=Plaza+de+Mayo+Buenos+Aires" target="_blank" class="btn btn-primary">
                        <i class="fas fa-external-link-alt me-2"></i>Ver en Google Maps
                    </a>
                </div>
            </div>
        </div>
        
        <div class="row g-4 mt-4">
            <div class="col-md-4 text-center">
                <div class="mb-2">
                    <i class="fas fa-subway text-primary" style="font-size: 2rem;"></i>
                </div>
                <h6 class="fw-bold">Metro / Subte</h6>
                <small class="text-muted">Línea A - Estación Plaza de Mayo<br>Línea D - Estación Catedral</small>
            </div>
            
            <div class="col-md-4 text-center">
                <div class="mb-2">
                    <i class="fas fa-bus text-primary" style="font-size: 2rem;"></i>
                </div>
                <h6 class="fw-bold">Colectivos</h6>
                <small class="text-muted">Líneas: 2, 22, 24, 28, 56, 61, 74, 86, 91, 126, 140, 143, 159</small>
            </div>
            
            <div class="col-md-4 text-center">
                <div class="mb-2">
                    <i class="fas fa-car text-primary" style="font-size: 2rem;"></i>
                </div>
                <h6 class="fw-bold">En Auto</h6>
                <small class="text-muted">Estacionamiento disponible en Puerto Madero (10 min caminando)</small>
            </div>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Validación del formulario
    const form = document.getElementById('contactForm');
    if (form) {
        form.addEventListener('submit', function(e) {
            const submitBtn = this.querySelector('button[type="submit"]');
            submitBtn.innerHTML = '<div class="loading-spinner"></div> Enviando...';
            submitBtn.disabled = true;
            
            // Aquí podrías agregar validación adicional o envío por AJAX
            // Por ahora, el formulario se enviará normalmente
        });
    }
    
    // Auto-llenar fecha mínima (hoy)
    const fechaInput = document.getElementById('fecha_interes');
    if (fechaInput) {
        const today = new Date().toISOString().split('T')[0];
        fechaInput.min = today;
    }
    
    // Formatear número de teléfono
    const telefonoInput = document.getElementById('telefono');
    if (telefonoInput) {
        telefonoInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, ''); // Solo números
            if (value.length > 0) {
                if (value.startsWith('54')) {
                    // Ya tiene código de país
                    value = '+' + value.substring(0, 2) + ' ' + value.substring(2);
                } else if (value.startsWith('11') || value.startsWith('15')) {
                    // Número de Buenos Aires
                    value = '+54 ' + value;
                } else if (value.length <= 10) {
                    // Asumir que es número local
                    value = '+54 11 ' + value;
                }
                e.target.value = value;
            }
        });
    }
});

// Mostrar mensaje de éxito (si viene de un envío exitoso)
if (window.location.search.includes('success=1')) {
    const successAlert = document.createElement('div');
    successAlert.className = 'alert alert-success alert-dismissible fade show position-fixed';
    successAlert.style.cssText = 'top: 20px; right: 20px; z-index: 1050; max-width: 400px;';
    successAlert.innerHTML = `
        <i class="fas fa-check-circle me-2"></i>
        <strong>¡Mensaje enviado!</strong> Nos pondremos en contacto contigo pronto.
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    document.body.appendChild(successAlert);
    
    // Auto-remover después de 5 segundos
    setTimeout(() => {
        successAlert.remove();
    }, 5000);
}
</script>
{% endblock %}
