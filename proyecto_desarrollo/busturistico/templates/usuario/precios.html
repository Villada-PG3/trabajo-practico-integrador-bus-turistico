{% extends 'usuario/base_usuario.html' %}
{% load custom_filters %}
{% block title %}Precccios - Bus Turístico Buenos Aires{% endblock %}
{% block content %}

<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="text-center">
            <h1 class="hero-title">{{ titulo_precios }}</h1>
            <p class="hero-subtitle">{{ subtitulo_precios }}</p>
        </div>
    </div>
</section>

<!-- Tabla de Precios -->
<section class="py-5">
    <div class="container">
        {% if precios %}
            <div class="row g-4 mb-5">
                {% for precio in precios %}
                <div class="col-lg-4 col-md-6 animate-on-scroll" style="animation-delay: {{ forloop.counter0|multiply:0.1 }}s;">
                    <div class="modern-card h-100 text-center p-4 position-relative overflow-hidden">
                        {% if precio.tipo == '48h' %}
                        <div class="position-absolute top-0 end-0 m-3">
                            <span class="badge bg-warning text-dark">
                                <i class="fas fa-star me-1"></i>Más Popular
                            </span>
                        </div>
                        {% endif %}
                        
                        <div class="mb-4">
                            <div class="d-inline-flex align-items-center justify-content-center rounded-circle mb-3" 
                                 style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--primary-color), var(--ba-blue));">
                                <i class="fas {% if precio.tipo == '24h' %}fa-clock{% elif precio.tipo == '48h' %}fa-calendar-day{% else %}fa-users{% endif %} text-white" style="font-size: 2rem;"></i>
                            </div>
                            <h3 class="fw-bold text-primary mb-2">{{ precio.get_tipo_display }}</h3>
                            <div class="display-4 fw-bold text-dark mb-0">
                                ${{ precio.precio_usd }}
                                <small class="fs-6 text-muted">USD</small>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            {% if precio.descripcion %}
                                <p class="text-muted">{{ precio.descripcion }}</p>
                            {% endif %}
                        </div>
                        
                        <hr class="my-4">
                        
                        <ul class="list-unstyled text-start mb-4">
                            {% if precio.tipo == '24h' %}
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    Acceso ilimitado por 24 horas
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    Todos los recorridos disponibles
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    Sube y baja las veces que quieras
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    Guía en español e inglés
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    Auriculares incluidos
                                </li>
                            {% elif precio.tipo == '48h' %}
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    Acceso ilimitado por 48 horas
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    Todos los recorridos disponibles
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    Flexibilidad total de horarios
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    Guía multiidioma (ES/EN/PT)
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    Auriculares y agua mineral
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-star text-warning me-2"></i>
                                    10% descuento en tienda de souvenirs
                                </li>
                            {% else %}
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    Hasta 4 personas (2 adultos + 2 menores)
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    Válido por 48 horas
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    Todos los recorridos incluidos
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    Prioridad en asientos
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-star text-warning me-2"></i>
                                    Snacks para los niños
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-star text-warning me-2"></i>
                                    Foto familiar de regalo
                                </li>
                            {% endif %}
                        </ul>
                        
                      <!-- precios.html - dentro del loop de cada precio (MODIFICADO) -->
                        <div class="d-grid gap-2 mt-auto">
                            <!-- MODIFICADO: ahora dirige al formulario de reserva para ese pase -->
                            <a href="{% url 'usuario-reservar' precio.id %}" class="btn btn-primary btn-lg">
                                <i class="fas fa-ticket-alt me-2"></i>Reservar Ahora
                            </a>
                            <small class="text-muted">
                                <i class="fas fa-shield-alt me-1"></i>Cancelación gratuita hasta 24h antes
                            </small>
                        </div>


                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="text-center py-5">
                <i class="fas fa-tags text-muted" style="font-size: 4rem; opacity: 0.3;"></i>
                <h4 class="text-muted mt-3">No hay precios disponibles en este momento</h4>
                <p class="text-muted">Contactános para más información</p>
                <a href="{% url 'usuario-contacto' %}" class="btn btn-primary">
                    <i class="fas fa-phone me-2"></i>Contactar
                </a>
            </div>
        {% endif %}
    </div>
</section>

<!-- Descuentos Especiales -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5 animate-on-scroll">
            <h2 class="display-5 fw-bold text-primary mb-3">Descuentos Especiales</h2>
            <p class="lead text-muted">Aprovechá nuestras promociones para ahorrar en tu visita</p>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-3 col-md-6 animate-on-scroll">
                <div class="modern-card text-center p-4 h-100">
                    <div class="mb-3">
                        <div class="d-inline-flex align-items-center justify-content-center rounded-circle" 
                             style="width: 70px; height: 70px; background: linear-gradient(135deg, #198754, #20c997);">
                            <i class="fas fa-graduation-cap text-white" style="font-size: 1.8rem;"></i>
                        </div>
                    </div>
                    <h5 class="fw-bold mb-2">Estudiantes</h5>
                    <div class="display-6 fw-bold text-success mb-2">20%</div>
                    <p class="text-muted small mb-3">Descuento con credencial vigente</p>
                    <small class="text-muted">
                        <i class="fas fa-info-circle me-1"></i>
                        Aplica a pases de 24h y 48h
                    </small>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6 animate-on-scroll" style="animation-delay: 0.1s;">
                <div class="modern-card text-center p-4 h-100">
                    <div class="mb-3">
                        <div class="d-inline-flex align-items-center justify-content-center rounded-circle" 
                             style="width: 70px; height: 70px; background: linear-gradient(135deg, #0d6efd, #6610f2);">
                            <i class="fas fa-user-friends text-white" style="font-size: 1.8rem;"></i>
                        </div>
                    </div>
                    <h5 class="fw-bold mb-2">Mayores de 65</h5>
                    <div class="display-6 fw-bold text-primary mb-2">25%</div>
                    <p class="text-muted small mb-3">Tercera edad</p>
                    <small class="text-muted">
                        <i class="fas fa-info-circle me-1"></i>
                        Con DNI o pasaporte
                    </small>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6 animate-on-scroll" style="animation-delay: 0.2s;">
                <div class="modern-card text-center p-4 h-100">
                    <div class="mb-3">
                        <div class="d-inline-flex align-items-center justify-content-center rounded-circle" 
                             style="width: 70px; height: 70px; background: linear-gradient(135deg, #fd7e14, #ffc107);">
                            <i class="fas fa-child text-white" style="font-size: 1.8rem;"></i>
                        </div>
                    </div>
                    <h5 class="fw-bold mb-2">Niños</h5>
                    <div class="display-6 fw-bold text-warning mb-2">50%</div>
                    <p class="text-muted small mb-3">De 4 a 12 años</p>
                    <small class="text-muted">
                        <i class="fas fa-info-circle me-1"></i>
                        Menores de 4 años gratis
                    </small>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6 animate-on-scroll" style="animation-delay: 0.3s;">
                <div class="modern-card text-center p-4 h-100">
                    <div class="mb-3">
                        <div class="d-inline-flex align-items-center justify-content-center rounded-circle" 
                             style="width: 70px; height: 70px; background: linear-gradient(135deg, #dc3545, #fd7e14);">
                            <i class="fas fa-users text-white" style="font-size: 1.8rem;"></i>
                        </div>
                    </div>
                    <h5 class="fw-bold mb-2">Grupos</h5>
                    <div class="display-6 fw-bold text-danger mb-2">15%</div>
                    <p class="text-muted small mb-3">10 o más personas</p>
                    <small class="text-muted">
                        <i class="fas fa-info-circle me-1"></i>
                        Reserva anticipada requerida
                    </small>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Información Adicional -->
<section class="py-5">
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-6 animate-on-scroll">
                <div class="modern-card p-4 h-100">
                    <h4 class="fw-bold mb-4">
                        <i class="fas fa-question-circle text-primary me-2"></i>
                        Preguntas Frecuentes sobre Precios
                    </h4>
                    
                    <div class="accordion accordion-flush" id="faqPrecios">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                    ¿Cómo puedo pagar?
                                </button>
                            </h2>
                            <div id="faq1" class="accordion-collapse collapse" data-bs-parent="#faqPrecios">
                                <div class="accordion-body">
                                    Aceptamos efectivo (pesos argentinos y dólares), tarjetas de crédito y débito (Visa, Mastercard, American Express), Mercado Pago y transferencias bancarias.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                    ¿Puedo comprar tickets online?
                                </button>
                            </h2>
                            <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqPrecios">
                                <div class="accordion-body">
                                    Sí, podés reservar y pagar online a través de nuestra página web o por WhatsApp. Recibirás un código QR para presentar el día del tour.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                    ¿Los precios incluyen todo?
                                </button>
                            </h2>
                            <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqPrecios">
                                <div class="accordion-body">
                                    Sí, los precios incluyen el bus, guía turístico, auriculares individuales, agua mineral y acceso a todos los recorridos durante la validez del pase.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                    ¿Puedo cambiar mi ticket por otro día?
                                </button>
                            </h2>
                            <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqPrecios">
                                <div class="accordion-body">
                                    Sí, podés cambiar la fecha sin costo adicional hasta 24 horas antes del horario programado. Contactanos por WhatsApp o email para hacer el cambio.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-6 animate-on-scroll" style="animation-delay: 0.2s;">
                <div class="modern-card p-4 h-100" style="background: linear-gradient(135deg, var(--primary-color), var(--ba-blue)); color: white;">
                    <h4 class="fw-bold mb-4">
                        <i class="fas fa-gift me-2"></i>
                        Ofertas Especiales
                    </h4>
                    
                    <div class="mb-4 p-3 rounded" style="background: rgba(255,255,255,0.1);">
                        <div class="d-flex align-items-center mb-2">
                            <i class="fas fa-calendar-alt me-2" style="font-size: 1.5rem;"></i>
                            <h5 class="fw-bold mb-0">Promo Temporada Baja</h5>
                        </div>
                        <p class="mb-2">Mayo - Agosto: 15% OFF en pases de 48h</p>
                        <small class="opacity-75">
                            <i class="fas fa-clock me-1"></i>Válido de lunes a jueves
                        </small>
                    </div>
                    
                    <div class="mb-4 p-3 rounded" style="background: rgba(255,255,255,0.1);">
                        <div class="d-flex align-items-center mb-2">
                            <i class="fas fa-percent me-2" style="font-size: 1.5rem;"></i>
                            <h5 class="fw-bold mb-0">Reserva Anticipada</h5>
                        </div>
                        <p class="mb-2">10% OFF comprando con 7 días de anticipación</p>
                        <small class="opacity-75">
                            <i class="fas fa-check me-1"></i>Aplica a todos los pases
                        </small>
                    </div>
                    
                    <div class="mb-4 p-3 rounded" style="background: rgba(255,255,255,0.1);">
                        <div class="d-flex align-items-center mb-2">
                            <i class="fas fa-heart me-2" style="font-size: 1.5rem;"></i>
                            <h5 class="fw-bold mb-0">Paquete Aniversario</h5>
                        </div>
                        <p class="mb-2">2 pases de 48h + cena romántica en Puerto Madero</p>
                        <small class="opacity-75">
                            <i class="fas fa-info-circle me-1"></i>Consultar disponibilidad
                        </small>
                    </div>
                    
                    <div class="text-center mt-4">
                        <a href="{% url 'usuario-contacto' %}" class="btn btn-light btn-lg">
                            <i class="fas fa-phone me-2"></i>Consultá por Promociones
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Comparación de Pases -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5 animate-on-scroll">
            <h2 class="display-5 fw-bold text-primary mb-3">Compará Nuestros Pases</h2>
            <p class="lead text-muted">Elegí el que mejor se adapte a tu estadía</p>
        </div>
        
        <div class="modern-card p-0 overflow-hidden">
                <table class="table table-hover mb-0">
                    <thead style="background: linear-gradient(135deg, var(--primary-color), var(--ba-blue)); color: white;">
                        <tr>
                            <th class="p-4">Características</th>
                            <th class="text-center p-4">Pase 24h</th>
                            <th class="text-center p-4">Pase 48h</th>
                            <th class="text-center p-4">Pase Familiar</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="p-3">
                                <i class="fas fa-clock text-primary me-2"></i>
                                <strong>Duración</strong>
                            </td>
                            <td class="text-center p-3">24 horas</td>
                            <td class="text-center p-3">48 horas</td>
                            <td class="text-center p-3">48 horas</td>
                        </tr>
                        <tr>
                            <td class="p-3">
                                <i class="fas fa-route text-primary me-2"></i>
                                <strong>Recorridos</strong>
                            </td>
                            <td class="text-center p-3">Todos</td>
                            <td class="text-center p-3">Todos</td>
                            <td class="text-center p-3">Todos</td>
                        </tr>
                        <tr>
                            <td class="p-3">
                                <i class="fas fa-users text-primary me-2"></i>
                                <strong>Personas</strong>
                            </td>
                            <td class="text-center p-3">1</td>
                            <td class="text-center p-3">1</td>
                            <td class="text-center p-3">Hasta 4</td>
                        </tr>
                        <tr>
                            <td class="p-3">
                                <i class="fas fa-headphones text-primary me-2"></i>
                                <strong>Auriculares</strong>
                            </td>
                            <td class="text-center p-3">
                                <i class="fas fa-check text-success"></i>
                            </td>
                            <td class="text-center p-3">
                                <i class="fas fa-check text-success"></i>
                            </td>
                            <td class="text-center p-3">
                                <i class="fas fa-check text-success"></i>
                            </td>
                        </tr>
                        <tr>
                            <td class="p-3">
                                <i class="fas fa-language text-primary me-2"></i>
                                <strong>Idiomas</strong>
                            </td>
                            <td class="text-center p-3">ES / EN</td>
                            <td class="text-center p-3">ES / EN / PT</td>
                            <td class="text-center p-3">ES / EN / PT</td>
                        </tr>
                        <tr>
                            <td class="p-3">
                                <i class="fas fa-tint text-primary me-2"></i>
                                <strong>Agua mineral</strong>
                            </td>
                            <td class="text-center p-3">
                                <i class="fas fa-check text-success"></i>
                            </td>
                            <td class="text-center p-3">
                                <i class="fas fa-check text-success"></i>
                            </td>
                            <td class="text-center p-3">
                                <i class="fas fa-check text-success"></i>
                            </td>
                        </tr>
                        <tr>
                            <td class="p-3">
                                <i class="fas fa-percent text-primary me-2"></i>
                                <strong>Descuento souvenirs</strong>
                            </td>
                            <td class="text-center p-3">
                                <i class="fas fa-times text-muted"></i>
                            </td>
                            <td class="text-center p-3">10%</td>
                            <td class="text-center p-3">15%</td>
                        </tr>
                        <tr>
                            <td class="p-3">
                                <i class="fas fa-star text-primary me-2"></i>
                                <strong>Extras</strong>
                            </td>
                            <td class="text-center p-3">-</td>
                            <td class="text-center p-3">-</td>
                            <td class="text-center p-3">Snacks + Foto</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td class="p-4">
                                <i class="fas fa-tag text-primary me-2"></i>
                                <strong>Precio</strong>
                            </td>
                            <td class="text-center p-4">
                                {% for precio in precios %}
                                    {% if precio.tipo == '24h' %}
                                        <strong class="text-primary fs-5">${{ precio.precio_usd }} USD</strong>
                                    {% endif %}
                                {% endfor %}
                            </td>
                            <td class="text-center p-4">
                                {% for precio in precios %}
                                    {% if precio.tipo == '48h' %}
                                        <strong class="text-success fs-5">${{ precio.precio_usd }} USD</strong>
                                    {% endif %}
                                {% endfor %}
                            </td>
                            <td class="text-center p-4">
                                {% for precio in precios %}
                                    {% if precio.tipo == 'familiar' %}
                                        <strong class="text-warning fs-5">${{ precio.precio_usd }} USD</strong>
                                    {% endif %}
                                {% endfor %}
                            </td>
                        </tr>
                    </tbody>
                </table>
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="py-5">
    <div class="container">
        <div class="modern-card p-5 text-center animate-on-scroll" style="background: var(--gradient-bg); color: white;">
            <h2 class="display-5 fw-bold mb-3">¿Listo para Reservar?</h2>
            <p class="lead mb-4">Contactanos ahora y asegurá tu lugar en el mejor tour de Buenos Aires</p>
            <div class="d-flex justify-content-center gap-3 flex-wrap">
                <a href="{% url 'usuario-contacto' %}" class="btn btn-light btn-lg">
                    <i class="fas fa-phone me-2"></i>Contactar
                </a>
                <a href="https://wa.me/5493515597470" target="_blank" class="btn btn-success btn-lg">
                    <i class="fab fa-whatsapp me-2"></i>WhatsApp
                </a>
                <a href="{% url 'usuario-recorridos' %}" class="btn btn-outline-light btn-lg">
                    <i class="fas fa-route me-2"></i>Ver Recorridos
                </a>
            </div>
            <p class="mt-4 mb-0 small opacity-75">
                <i class="fas fa-shield-alt me-1"></i>
                Compra 100% segura • Cancelación gratuita • Mejor precio garantizado
            </p>
        </div>
    </div>
</section>

<style>
.table thead th {
    border: none;
}
.table tbody tr {
    transition: all 0.3s ease;
}
.table tbody tr:hover {
    background-color: #f8f9fa;
    transform: scale(1.01);
}
.modern-card {
    display: flex;
    flex-direction: column;
}

</style>

{% endblock %}